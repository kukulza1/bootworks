<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>회원가입</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
<script
  src="https://code.jquery.com/jquery-3.7.1.js"
  integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
  crossorigin="anonymous"></script>
</head>
<body>
<div th:replace="~{/layout/header::header-fragment}"></div>
   <div id="container">
         <h2>회원가입</h2>
         <form th:action="@{/member/join}" method="post" class="joinform">
          <fieldset>
            <ul>
		            <li>
		              <label for="memberId">아이디</label>
		              <input type="text" name="memberId" id="memberId"
		              onblur="checkMemberId()">
		            </li>      
		            <li>
		            <p id="check-result"></p>
		            </li>     
		            <li>
		              <label for="password">비번</label>
		              <input type="password" name="password" id="password">
		            </li>           
		            <li>
		              <label for="name">이름</label>
		              <input type="text" name="name" id="name">
		            </li>           	                   
		            <li>
		              <input type="submit" value="가입">
		              <input type="reset" value="취소">
		              <a href="/">목록으로</a>
		            </li>           
            </ul>        
          </fieldset>        
         </form>               
   </div>
   <script>
   const checkemail =() =>{
	   //alert("test...")
	   let inputemail = document.getElementById("memberEmail").value;
	   let checkResult = document.getElementById("check-result");
	   console.log(inputemail);
	   
	   $.ajax({
		   type: "post",
			url: "/member/check-email",
				data:{
					memberEmail:inputemail
				},
					success: function(res){
						console.log("성공",res);
						if(res == "OK"){
							checkResult.innerHTML = "사용가능한이메일 입니다.";
						}else{
							checkResult.innerHTML = "이미등록된 이메일 입니다.";
						}
					},
		   error: function(err){
				console.log("실패",err);
		   }
		   
	   });
   };
   </script>
   <div th:replace="~{/layout/footer::footer-fragment}"></div>
</body>
</html>











